(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1295:function(e,t,a){"use strict";a.r(t);a(671),a(874),a(733),a(166),a(879);var n=a(1266),r=a(743),i=a(651),s=a(1271),o=a(6),l=a(652),c=a(167),u=a(745),d=a(1257),p=a(873),g=a(881),m=a(71),f=a(121),h=a.n(f),v=a(112),S=a.n(v),y=a(113),E=a.n(y),w=a(114),C=a.n(w),b=a(115),k=a.n(b),z=a(31),I=a.n(z),x=a(116),U=a.n(x),L=a(28),O=a.n(L),A=a(0),D=a.n(A),M=a(682),j=a(655),R=a(650);var _=function(e){function t(){var e,a,n;S()(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=C()(this,(e=k()(t)).call.apply(e,h()(a=[this]).call(a,i))),O()(I()(n),"columns",[{title:"序号",type:"index",key:"index",render:function(e,t,a){return a+1}},{title:"姓名",dataIndex:"username",key:"username"},{title:"年龄",dataIndex:"age",key:"age"},{title:"性别",dataIndex:"gender",key:"gender",render:function(e,t,a){return 1===e?"男":"女"}},{title:"头像",dataIndex:"avatar",key:"avatar",render:function(e,t,a){return D.a.createElement("img",{src:e,alt:t.name,title:t.name,style:{height:"34px"}})}},{title:"添加时间",dataIndex:"createtime",render:function(e,t,a){return(n=e)?new Date(n).Format("yyyy-MM-dd hh:mm:ss"):"";var n}},{title:"状态",dataIndex:"status",key:"status",render:function(e,t,a){return 1===e?"启用":"禁用"}},{title:"操作",dataIndex:"action",width:260,key:"action",render:function(e,t,a){var r=t.status?"确定禁用？":"确定启用？";return D.a.createElement("div",null,D.a.createElement(m.a,{type:"primary",onClick:function(){return n.edit(t)}},"编辑")," ",D.a.createElement(g.a,{placement:"top",title:r,onConfirm:function(){return n.switch(t)}},D.a.createElement(m.a,{type:"danger"},1===t.status?"禁用":"启用"))," ",D.a.createElement(g.a,{placement:"top",title:"确定删除？",onConfirm:function(){return n.delete(t)}},D.a.createElement(m.a,{type:"danger"},"删除")))}}]),O()(I()(n),"state",{tableData:[],visible:!1,loading:!0,page:1,size:15,total:0,pageSizeOptions:["15","20","50"],percent:0}),O()(I()(n),"search",(function(e,t){var a={page:e,size:t};Object(M.a)(a).then((function(e){if(n.setState({loading:!1}),200===e.code){var t=e.data,a=t.data,r=void 0===a?[]:a,i=t.total;n.setState({tableData:r,total:i}),window.scrollTo(0,0)}}))})),O()(I()(n),"onShowSizeChange",(function(e,t){n.setState({page:1,size:t}),n.search(1,t)})),O()(I()(n),"pageChange",(function(e){n.setState({page:e});var t=n.state.size;n.search(e,t)})),O()(I()(n),"componentDidMount",(function(){var e=n.state,t=e.page,a=e.size;n.search(t,a)})),O()(I()(n),"edit",(function(e){n.setState({visible:!0})})),O()(I()(n),"delete",(function(e){console.log(e)})),O()(I()(n),"onUploadChange",(function(e){var t=e.file,a=(e.fileList,e.event);if("uploading"===t.status)if(a){var r=a.loaded/a.total*100;n.setState({percent:Number(r.toFixed(0))})}else n.setState({percent:0});else if("done"===t.status){var i=t.response;if(200===i.code){var s=i.data[0];console.log(s)}}})),O()(I()(n),"confirms",(function(){n.setState({visible:!1})})),O()(I()(n),"switch",(function(e){var t,a=1===e.status?2:1;(t={id:e._id,status:a},j.a.post(R.a.userStatus,t)).then((function(e){if(200===e.code){p.a.success("用户状态修改成功");var t=n.state,a=t.page,r=t.size;n.search(a,r)}else p.a.error("用户状态修改失败")}))})),O()(I()(n),"modalCancel",(function(){n.setState({visible:!1})})),n}return U()(t,e),E()(t,[{key:"render",value:function(){var e=this.state,t=e.tableData,a=e.page,p=e.size,g=e.total,f=e.pageSizeOptions,h=e.loading,v=e.visible,S=e.percent,y=this.columns;return D.a.createElement(D.a.Fragment,null,D.a.createElement(d.a,{bordered:!0,rowKey:"id",dataSource:t,columns:y,pagination:!1,loading:h}),D.a.createElement("div",{className:"page"},D.a.createElement(u.a,{showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,onChange:this.pageChange,pageSizeOptions:f,current:a,pageSize:p,total:g})),D.a.createElement(n.a,{title:"编辑",keyboard:!1,maskClosable:!1,destroyOnClose:!0,visible:v,onOk:this.confirms,onCancel:this.modalCancel},D.a.createElement(i.a,{gutter:24},D.a.createElement(l.a,{span:12},D.a.createElement(c.a,null)),D.a.createElement(l.a,{span:12},D.a.createElement(s.a,{action:"".concat(R.a.upload),name:"upfile",onChange:this.onUploadChange},D.a.createElement(m.a,null,D.a.createElement(o.a,{type:"upload"})," 上传")))),D.a.createElement(i.a,{gutter:24},D.a.createElement(l.a,{span:12,offset:12},D.a.createElement(r.a,{type:"circle",percent:S})))))}}]),t}(D.a.Component);t.default=_},650:function(e,t,a){"use strict";var n="";n=(window.location.hostname,"http://122.51.129.51:8080");var r={};r.BASE_URI=n+"/note",r.upload=r.BASE_URI+"/upload/uploadfile",r.userLogin="/user/login",r.getLoginUserInfo="/user/loginUserInfo",r.userLogout="/user/logout",r.getUser="/user/checkuser",r.userList="/user/userList",r.userStatus="/user/changeUserStatus",r.getAllMenu="/menu/getMenu",t.a=r},655:function(e,t,a){"use strict";var n=a(674),r=a.n(n),i=a(650);let s=r.a.create({baseURL:i.a.BASE_URI,timeout:1e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=sessionStorage.getItem("token");return t&&(e.headers.token=t),e},e=>{Promise.reject(e)}),s.interceptors.response.use(e=>{return e.data},e=>{Promise.reject(e)}),t.a=s},682:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(655),r=a(650);function i(e){return n.a.post(r.a.userList,e)}}}]);